{% load static %}
{% load timezone_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>{% block title %}Cosmo Staff Portal{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/theme-toggle.css' %}">
    <link rel="stylesheet" href="{% static 'css/pages/staff-base.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- CSRF Token for AJAX requests -->
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}" />
    
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img class="logo-img" src="{% static 'images/cosmo_logo.jpg' %}" alt="Cosmo">
                <span>Cosmo Staff Portal</span>
            </div>
            
                    <!-- Mobile Navigation Toggle -->
        <button class="mobile-nav-toggle" id="mobileNavToggle" type="button">
            â˜°
        </button>

        <!-- Quick Action Bar (Mobile Only) -->
        <div class="quick-action-bar" id="quickActionBar">
            <a href="/api/staff/tasks/" class="quick-action-btn">ğŸ“‹ Tasks</a>
            <a href="/api/staff/cleaning/" class="quick-action-btn">ğŸ§¹ Cleaning</a>
            <a href="/api/staff/maintenance/" class="quick-action-btn">ğŸ”§ Maintenance</a>
            <a href="/api/staff/laundry/" class="quick-action-btn">ğŸ§º Laundry</a>
            <a href="/api/staff/lawn_pool/" class="quick-action-btn">ğŸŒ¿ Lawn/Pool</a>
            <a href="/api/staff/inventory/" class="quick-action-btn">ğŸ“¦ Inventory</a>
            <a href="/api/staff/lost-found/" class="quick-action-btn">ğŸ” Lost & Found</a>
        </div>

            <!-- Navigation Links -->
            <div class="nav-links" id="navLinks">
                <a href="/api/portal/" class="nav-link">ğŸ  Portal</a>
                <a href="/api/staff/" class="nav-link">ğŸ“‹ Tasks</a>
                <a href="/api/staff/inventory/" class="nav-link">ğŸ“¦ Inventory</a>
                <a href="/api/staff/lost-found/" class="nav-link">ğŸ” Lost & Found</a>
            </div>

            <div class="user-info">
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark mode">
                    <svg class="theme-toggle-icon sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="theme-toggle-icon moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <span class="role-badge">{% if user.profile %}{{ user.profile.get_role_display|default:"Staff" }}{% else %}Staff{% endif %}</span>
                <span>{% if user %}{{ user.get_full_name|default:user.username }}{% else %}Guest{% endif %}</span>
                <a href="{% url 'unified_logout' %}" class="nav-link">Logout</a>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <nav class="nav">
        <a href="/api/staff/" class="{% if request.resolver_match.url_name == 'staff_dashboard' %}active{% endif %}">Dashboard</a>
        <a href="/api/staff/tasks/" class="{% if 'tasks' in request.path %}active{% endif %}">My Tasks</a>
        <a href="/api/chat/" class="{% if 'chat' in request.path %}active{% endif %}">ğŸ’¬ Chat</a>
        <a href="/api/staff/maintenance/" class="{% if 'maintenance' in request.path %}active{% endif %}">Maintenance</a>
        <a href="/api/staff/cleaning/" class="{% if 'cleaning' in request.path %}active{% endif %}">Cleaning</a>
        <a href="/api/staff/laundry/" class="{% if 'laundry' in request.path %}active{% endif %}">Laundry</a>
        <a href="/api/staff/lawn_pool/" class="{% if 'lawn_pool' in request.path %}active{% endif %}">Lawn/Pool</a>
        <a href="/api/staff/inventory/" class="{% if 'inventory' in request.path %}active{% endif %}">Inventory</a>
        <a href="/api/staff/lost-found/" class="{% if 'lost-found' in request.path %}active{% endif %}">Lost & Found</a>
    </nav>

    <div class="container">
        {% block content %}{% endblock %}
    </div>

    <script src="{% static 'js/theme-toggle.js' %}"></script>
    
    <!-- Hidden Sarcastic Message - Staff Mobile Edition -->
    <div id="cosmo-secret-message-staff" class="secret-message-staff" aria-hidden="true">
        <div class="secret-message-staff__title">
            ğŸ“± A Staff Member's Secret ğŸ“±
        </div>
        <div class="secret-message-staff__body">Oh, have you no shame, dear friend of mine?
To strut about boldly, crossing the line?
With cheek so divine and nerve so grand,
You march unashamed through all the land.

What audacity fills your trembling soul,
To flaunt your misdeeds as your lofty goal?
No blush, no hint of modesty's flame,
Tell me truly, have you no shame?

You wear shameless acts like a badge of pride,
As if decency has left your side.
Oh, the gall, the nerve, the unabashed gameâ€”
Pray tell, dear friend, have you no shame?</div>
        <button type="button" class="secret-message-staff__close js-secret-message-staff-close">âœ¨ Close This Mobile Secret âœ¨</button>
    </div>

    <!-- Secret Message Overlay -->
    <div id="secret-message-overlay-staff" class="secret-message-overlay-staff"></div>
    
    <!-- Footer with Copyright -->
    <footer class="staff-footer">
        <p class="staff-footer__line">&copy; 2025 Nguyen Phuong Duy Lam. All rights reserved. | <a href="https://lambertnguyen.cloud/company/products" target="_blank" class="staff-footer__link">Visit Our Products</a></p>
        <p class="staff-footer__subline">Built with â¤ï¸ for learning.</p>
    </footer>

    <script type="module" src="{% static 'js/pages/staff-base.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
