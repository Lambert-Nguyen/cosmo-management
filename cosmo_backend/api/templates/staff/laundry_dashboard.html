{% extends "layouts/staff_layout.html" %}
{% load static %}

{% block page_title %}Laundry Dashboard - Cosmo Staff Portal{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/laundry-dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-number">{{ total_assigned }}</div>
        <div class="stat-label">Total Assigned</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ pickup_tasks.count }}</div>
        <div class="stat-label">Pickup Tasks</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ processing_tasks.count }}</div>
        <div class="stat-label">Processing</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ linen_items.count }}</div>
        <div class="stat-label">Linen Items</div>
    </div>
</div>

{% if pickup_tasks %}
<div class="card">
    <div class="card-header">
        ğŸ“¥ Pickup Tasks
    </div>
    {% for task in pickup_tasks %}
    <div class="task-item">
        <div class="task-title">
            <a href="/api/staff/tasks/{{ task.id }}/" class="dashboard-task-link">
                {{ task.title }}
            </a>
        </div>
        <div class="task-meta">
            <span>ğŸ  {{ task.property_ref.name|default:"No Property" }}</span>
            <span>â° Due: {{ task.due_date|date:"M d, H:i" }}</span>
            <span class="status-badge status-{{ task.status|cut:'-' }}">{{ task.get_status_display }}</span>
            {% if task.assigned_to %}
            <span>ğŸ‘¤ {% if task.assigned_to %}{{ task.assigned_to.username }}{% else %}Not assigned{% endif %}</span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if processing_tasks %}
<div class="card">
    <div class="card-header">
        ğŸ”„ Processing Tasks
    </div>
    {% for task in processing_tasks %}
    <div class="task-item">
        <div class="task-title">
            <a href="/api/staff/tasks/{{ task.id }}/" class="dashboard-task-link">
                {{ task.title }}
            </a>
        </div>
        <div class="task-meta">
            <span>ğŸ  {{ task.property_ref.name|default:"No Property" }}</span>
            <span>â° Due: {{ task.due_date|date:"M d, H:i" }}</span>
            <span class="status-badge status-{{ task.status|cut:'-' }}">{{ task.get_status_display }}</span>
            {% if task.assigned_to %}
            <span>ğŸ‘¤ {% if task.assigned_to %}{{ task.assigned_to.username }}{% else %}Not assigned{% endif %}</span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="grid">
    <div class="card">
        <div class="card-header">
            ğŸ§º Today's Tasks
        </div>
        <div class="empty-state">
            <div class="dashboard-empty-icon">âœ…</div>
            <h3>No laundry tasks due today!</h3>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            ğŸ“¦ Linen Inventory
        </div>
        <div class="empty-state">
            <div class="dashboard-empty-icon">ğŸ“¦</div>
            <h3>All linen levels are healthy!</h3>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        ğŸ§º All Laundry Tasks
    </div>
    <div class="empty-state">
        <div class="dashboard-empty-icon">ğŸ§º</div>
        <h3>No laundry tasks assigned</h3>
    </div>
</div>
{% endblock %}
